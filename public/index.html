<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>化学仪器预约</title>
        <link rel="stylesheet" type="text/css" href="http://chemorder.avosapps.com/sources/dhtmlxscheduler.css" media="screen" title="no title">
        <script type="text/javascript" src="http://chemorder.avosapps.com/sources/dhtmlxscheduler.js"></script>
        <script type="text/javascript" src="http://chemorder.avosapps.com/sources/locale/locale_cn.js"></script>
        <script type="text/javascript" src="http://chemorder.avosapps.com/sources/cloudfunc.js"></script>
        <style type="text/css" media="screen">
            html, body{
                margin:0;
                padding:0;
                height:100%;
                overflow:hidden;
            }

            /*event in day or week view*/
            .dhx_cal_event.past_event div{
                background-color: lightgray !important;
                color: white !important;
            }
            /*multi-day event in month view*/
            .dhx_cal_event_line.past_event{
                background-color: black !important;
                color: white !important;
            }
            /*event with fixed time, in month view*/
            .dhx_cal_event_clear.past_event{
                color: lightgray !important;
            }

            .dhx_cal_event.event_math div, .dhx_cal_event_line.event_math{
                background-color: orange !important;
                color: blue !important;
            }
            .dhx_cal_event_clear.event_math{
                color: blue !important;
            }

            .dhx_cal_event.event_science div, .dhx_cal_event_line.event_science{
                background-color: #add8e6 !important;
                color: #8b0000 !important;
            }
            .dhx_cal_event_clear.event_science{
                color: #8b0000 !important;
            }

            .dhx_cal_event.event_english div, .dhx_cal_event_line.event_english{
                background-color: #e0ffff !important;
                color: #008b8b !important;
            }
            .dhx_cal_event_clear.event_english{
                color: #008b8b !important;
            }

        </style>

        <script type="text/javascript">
            function init() {
                scheduler.config.xml_date = "%Y-%m-%d %H:%i";
                scheduler.config.time_step = 30;
                scheduler.config.multi_day = true;
                scheduler.locale.labels.section_subject = "Subject";
                scheduler.config.first_hour = 8;
                scheduler.config.last_hour = 22;
                
                scheduler.templates.event_class = function(start, end, event) {
                    if (end < new Date()) // event start before control date
                        return "past_event";
                    if (event.subject) // if event has subject property then special class should be assigned
                        return "event_" + event.subject;

                    return ""; // default return

                    /*
                     Note that it is possible to create more complex checks
                     events with the same properties could have different CSS classes depending on the current view:
                 
                     var mode = scheduler.getState().mode;
                     if(mode == "day"){
                     // custom logic here
                     }
                     else {
                     // custom logic here
                     }
                     */
                };
                var subject = [
                    {key: '', label: 'Appointment'},
                    {key: 'english', label: 'English'},
                    {key: 'math', label: 'Math'},
                    {key: 'science', label: 'Science'}
                ];

                scheduler.config.lightbox.sections = [
                    {name: "description", height: 43, map_to: "text", type: "textarea", focus: true},
                    {name: "subject", height: 20, type: "select", options: subject, map_to: "仪器"},
                    {name: "time", height: 72, type: "time", map_to: "auto"}
                ];
                var today = new Date();
                scheduler.init('orders', today, "week");
                AVCloud.loadEvents(new Date(today.getFullYear(), today.getMonth(), today.getDate() - today.getDay()), null, function(events) {
                    scheduler.parse(events,'json');
                });
            }
        </script>
    </head>
    <body onload="init();">
        <div id="orders" class="dhx_cal_container" style='width:100%; height:100%;'>
            <div class="dhx_cal_navline">
                <div class="dhx_cal_prev_button">&nbsp;</div>
                <div class="dhx_cal_next_button">&nbsp;</div>
                <div class="dhx_cal_today_button"></div>
                <div class="dhx_cal_date"></div>
            </div>
            <div class="dhx_cal_header">
            </div>
            <div class="dhx_cal_data">
            </div>      
        </div>
    </body>
